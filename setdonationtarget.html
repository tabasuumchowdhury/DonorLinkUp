<!DOCTYPE html>
<html>
<head>
    <title>Set Donation Target</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" type="image/png" href="/graphics/donorlinkuplogo.png">
    <script>
        function saveTarget() {
            const donationAmount = document.getElementById('donation-amount').value;
            const startDate = document.getElementById('start-date').value;
            const endDate = document.getElementById('end-date').value;
            const frequency = document.getElementById('frequency').value;
    
            if (!donationAmount || isNaN(donationAmount) || donationAmount <= 0) {
                alert("Please enter a valid donation amount (a positive number).");
                return;
            }
    
            if (!startDate || !endDate) {
                alert("Please select both a start date and an end date.");
                return;
            }
    
            const start = new Date(startDate);
            const end = new Date(endDate);
            if (end <= start) {
                alert("End date must be after the start date. Please correct the dates.");
                return;
            }
    
            const diffTime = Math.abs(end - start);
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
    
            let donationPerPeriod;
            if (frequency === "day") {
                donationPerPeriod = donationAmount / diffDays;
            } else if (frequency === "week") {
                donationPerPeriod = donationAmount / (diffDays / 7);
            } else if (frequency === "month") {
                donationPerPeriod = donationAmount / (diffDays / 30);
            }
    
            // Store the data in sessionStorage
            sessionStorage.setItem('donationAmount', donationAmount);
            sessionStorage.setItem('startDate', startDate);
            sessionStorage.setItem('endDate', endDate);
            sessionStorage.setItem('frequency', frequency);
            sessionStorage.setItem('donationPerPeriod', donationPerPeriod.toFixed(2));
    
            // Redirect to the profile page
            window.location.href = 'myprofile.html';
        }
    </script>    
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f0f8ff;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }

        .donation-page {
            width: 100%;
            max-width: 600px;
            background-color: #f0f8ff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .donation-page img {
            width: 100px;
            margin-bottom: 20px;
        }

        .header-text {
            font-size: 24px;
            font-weight: bold;
            color: #333;
            margin-bottom: 30px;
        }

        .form-group {
            margin-bottom: 20px;
            text-align: left;
        }

        .form-group label {
            font-size: 16px;
            color: #555;
            display: block;
            margin-bottom: 5px;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 10px;
            font-size: 16px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        .nav {
            text-align: center;
            margin-top: 20px;
        }

        .nav button {
            padding: 12px 20px;
            font-size: 18px;
            background-color: #007bff;
            color: #fff;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .nav button:hover {
            background-color: #0056b3;
        }
    </style>
</head>
<body>
    <main class="donation-page">
        <img src="/graphics/donorlinkuplogo.png" alt="Heart Logo">
        <div class="header-text">
            Enter your target donation details
        </div>
        <div class="form-group">
            <label for="donation-amount">Enter your target donation amount in CAD</label>
            <input type="number" id="donation-amount" placeholder="e.g., 1000">
        </div>
        <div class="form-group">
            <label for="start-date">Select the start date</label>
            <input type="date" id="start-date">
        </div>
        <div class="form-group">
            <label for="end-date">Select the end date</label>
            <input type="date" id="end-date">
        </div>
        <div class="form-group">
            <label for="frequency">Choose your donation frequency</label>
            <select id="frequency">
                <option value="day">Per Day</option>
                <option value="week">Per Week</option>
                <option value="month">Per Month</option>
            </select>
        </div>
        <div class="nav">
            <button type="button" onclick="saveTarget()">Next</button>
        </div>
    </main>
</body>
</html>
